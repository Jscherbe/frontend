{# 
  Print menu structure, from eleventyNav array
  - Note you need to include the page data if you want to add icons
  @param {Array} items Array from eleventyNav
  @param {Array} depth Menu level depth
  @param {Array} currentDepth Current depth (used internally) 
#}
{% macro menu(collection, depth=1, currentDepth=0) %}
  {% set currentDepth = currentDepth + 1 %}
  <ul class="menu">
    {%- for entry in collection %}
      <li class="menu__item">
        <a 
          href="{{ entry.url }}"
          {% if entry.url == page.url %} 
            aria-current="page"
          {% endif %}
        >
          {% if entry.page.data.icon %}
            <i class="menu__icon" data-feather="{{ entry.page.data.icon }}"></i>
          {% endif %}
          <span class="menu__text">{{ entry.title }}</span>
        </a>
        {% if entry.children and currentDepth <= depth %}
          {{ menu(entry.children, depth, currentDepth) }}
        {% endif %}
      </li>
    {%- endfor %}
  </ul>
{% endmacro %}